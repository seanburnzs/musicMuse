{% extends "base.html" %}

{% block header_title %}Life Events{% endblock %}

{% block content %}
<div class="events-container">
  <div class="events-header">
    <h2>Your Life Events</h2>
    <a href="{{ url_for('event.new_event') }}" class="new-event-button">
      <i class="fas fa-plus"></i> New Event
    </a>
  </div>
  
  {% if events %}
    <div class="events-timeline">
      {% for event in events %}
        <div class="event-card" style="border-left-color: {{ event.color }}">
          <div class="event-header">
            <h3 class="event-name">{{ event.name }}</h3>
            <span class="event-category">{{ event.category }}</span>
          </div>
          
          <div class="event-dates">
            {{ event.start_date }} - 
            {% if event.end_date %}
              {{ event.end_date }}
            {% else %}
              Present
            {% endif %}
          </div>
          
          {% if event.description %}
            <div class="event-description">{{ event.description }}</div>
          {% endif %}
          
          <div class="event-actions">
            <a href="{{ url_for('event.edit_event', event_id=event.event_id) }}" class="event-action edit">
              <i class="fas fa-edit"></i> Edit
            </a>
            <form method="POST" action="{{ url_for('event.delete_event', event_id=event.event_id) }}" class="delete-form" onsubmit="return confirm('Are you sure you want to delete this event?');">
              <input type="hidden" name="csrf_token" value="{{ csrf_token }}">
              <button type="submit" class="event-action delete">
                <i class="fas fa-trash"></i> Delete
              </button>
            </form>
          </div>
        </div>
      {% endfor %}
    </div>
  {% else %}
    <div class="no-events">
      <p>You haven't created any life events yet.</p>
      <p>Events help you track your listening habits during significant periods in your life.</p>
      <p>Added events are searchable in the Music Muse query tool.</p>
    </div>
  {% endif %}
</div>
{% endblock %}