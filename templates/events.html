{% extends "base.html" %}

{% block header_title %}Life Events{% endblock %}

{% block content %}
<div class="events-container">
  <div class="events-header">
    <h2>Your Life Events</h2>
    <a href="{{ url_for('new_event') }}" class="new-event-button">
      <i class="fas fa-plus"></i> New Event
    </a>
  </div>
  
  {% if events %}
    <div class="events-timeline">
      {% for event_id, name, start_date, end_date, description, category, color in events %}
        <div class="event-card" style="border-left-color: {{ color }}">
          <div class="event-header">
            <h3 class="event-name">{{ name }}</h3>
            <span class="event-category">{{ category }}</span>
          </div>
          
          <div class="event-dates">
            {{ start_date.strftime('%b %d, %Y') }} - 
            {% if end_date %}
              {{ end_date.strftime('%b %d, %Y') }}
            {% else %}
              Present
            {% endif %}
          </div>
          
          {% if description %}
            <div class="event-description">{{ description }}</div>
          {% endif %}
          
          <div class="event-actions">
            <a href="{{ url_for('edit_event', event_id=event_id) }}" class="event-action edit">
              <i class="fas fa-edit"></i> Edit
            </a>
            <form method="POST" action="{{ url_for('delete_event', event_id=event_id) }}" class="delete-form" onsubmit="return confirm('Are you sure you want to delete this event?');">
              <button type="submit" class="event-action delete">
                <i class="fas fa-trash"></i> Delete
              </button>
            </form>
          </div>
        </div>
      {% endfor %}
    </div>
  {% else %}
    <div class="no-events">
      <p>You haven't created any life events yet.</p>
      <p>Events help you track your listening habits during significant periods in your life.</p>
    </div>
  {% endif %}
</div>
{% endblock %}